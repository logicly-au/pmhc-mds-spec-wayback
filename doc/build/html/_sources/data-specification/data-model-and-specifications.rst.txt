.. _data-model-and-specifications:

Data Model and Specifications
=============================

TWB is an extension of the Primary Mental Health Care Minimum Data Set (PMHC MDS);
the current PMHC MDS Data model and specification rules may apply. These are available to be viewed at
https://docs.pmhc-mds.com/data-specification/index.html.

.. _data-model:

Data model
----------

.. _data-model-diagram:

.. figure:: figures/data-model.svg
   :alt: TWB & PMHC data model

   TWB data model *within the PMHC MDS*

**Note:** :ref:`collection-occasion-diagram` for more details about
Collection Occasion records.

.. _collection-occasion-diagram:

.. figure:: figures/collection-occasion-data-model.svg
   :alt: TWB Collection Occasion data model

   TWB Collection Occasion data model

**Note:** See :ref:`data-model-diagram` for more details about how
Collection Occasion records fit into the overall structure.


.. _record-formats:

TWB Record formats
------------------

The Way Back adds the following records on top of PMHC MDS current specifications:

- See :ref:`TWB-Episode data specifications <twb-episode-data-elements>` for Individual Services Data.
- See :ref:`TWB-Referral Out data specifications <twb-referral-out-data-elements>` for Referral Out Data.
- See :ref:`TWB-Plan Outcome Collection Occasion data specifications <twb-plan-data-elements>` for Individual Services Data.
- See :ref:`TWB-INI Outcome Collection Occasion data specifications <twb-ini-data-elements>` for Individual Services Data.
- See :ref:`WHO-5 Outcome Collection Occasion data specifications <who5-data-elements>` for Individual Services Data.
- See :ref:`SIDAS Outcome Collection Occasion data specifications <sidas-data-elements>` for Individual Services Data.
- See :ref:`MSPSS Outcome Collection Occasion data specifications <mspss-data-elements>` for Individual Services Data.

.. _episode-data-elements:

Episode Data Elements
^^^^^^^^^^^^^^^^^^^^^

.. _twb-episode-data-elements:

TWB-Episode
~~~~~~~~~~~

See :ref:`key-concepts-episode` for definition of an episode.

Episodes are managed by the provider organisations via upload or data entry.

.. csv-table:: Episode record layout
  :file: record/twb-episode.csv
  :header-rows: 1

----------

.. _twb-referral-out-data-elements:

TWB-Referral Out
~~~~~~~~~~~~~~~~

See :ref:`key-concepts-episode` for definition of a Referral Out.

Referral Outs are managed by the provider organisations via upload or data entry.

.. csv-table:: Referral Out record layout
  :file: record/twb-referral-out.csv
  :header-rows: 1

----------

.. _outcome-collection-occasion-data-elements:

`-` Collection Occasion Data Elements
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

See :ref:`key-concepts-outcome-collection-occasion` for definition of an outcome
collection occasion.

Outcome collection occasions are managed by the provider organisations via upload or data entry.

TWB requires the use of the following outcome collection occasion measures.

.. _twb-plan-data-elements:

TWB Plan Outcome Collection Occasion
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. csv-table:: TWB Plan record layout
  :file: record/twb-plan-collection-occasion.csv
  :header-rows: 1

----------

.. _twb-ini-data-elements:

TWB INI Outcome Collection Occasion
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. csv-table:: TWB Plan record layout
  :file: record/twb-ini-collection-occasion.csv
  :header-rows: 1

----------

.. _who5-data-elements:

WHO-5 Outcome Collection Occasion
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. csv-table:: WHO-5 record layout
  :file: record/who5-collection-occasion.csv
  :header-rows: 1

----------

.. _sidas-data-elements:

SIDAS Outcome Collection Occasion
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. csv-table:: SIDAS record layout
  :file: record/sidas-collection-occasion.csv
  :header-rows: 1

----------

.. _mspss-data-elements:

MSPSS Outcome Collection Occasion
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. csv-table:: MSPSS record layout
  :file: record/mspss-collection-occasion.csv
  :header-rows: 1

----------

.. _metadata-data-elements:

Metadata
^^^^^^^^

The Metadata table must be included in file uploads in order to identify
the type and version of the uploaded data.

.. csv-table:: Metadata record layout
   :file: record/metadata.csv
   :header-rows: 1

For this version of the specification the required content is shown in the
following table:

+--------------+------------+
| key          | value      |
+--------------+------------+
| type         | wayback    |
+--------------+------------+
| version      | 2          |
+--------------+------------+

.. _pmhc-data-elements:

PMHC MDS Record Formats
~~~~~~~~~~~~~~~~~~~~~~~

As TWB is an extension of the Primary Mental Health Care Minimum Data Set
(PMHC MDS), the current PMHC MDS Data model and specification record formats are
available to be viewed at https://docs.pmhc-mds.com/data-specification/data-model-and-specifications.html#record-formats.


----------

.. _twb-definitions-data-elements:

TWB Definitions
---------------

.. include:: include/definitions.rst


.. _data-specifications-download:

Download Specification Files
----------------------------

.. This is a comment. Is this required? (Will probably need a dev to assist)

Available for software developers designing extracts for TWB, please
click the link below to download TWB Specification files for the PMHC MDS:

* :download:`TWB Specification zip </_static/wayback-spec-meta.zip>`
